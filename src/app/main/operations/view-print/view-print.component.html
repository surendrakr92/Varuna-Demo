<div class="main-contianer">
    <div class="display bg-dark-light mb-2">
        <span class="title">
            <a routerLink="/indent"><i class="bi bi-arrow-return-left booticon" ngbTooltip="Back to Indent"
                    placement="right"></i> </a>
        </span>
        <span class="titlemed">View Document</span>
        <span class="title">
            <a routerLink="/dashboard"> <i class="bi bi-house-gear booticon " ngbTooltip="Dashboad"
                    placement="bottom"></i>
            </a>
        </span>
    </div>
    <form [formGroup]="formMaster">
        <div class="row">
            <div class="col-lg-3 ">
                <div class="form-group ">
                    <label for="inputText" class="col-sm-12 col-lg-12 col-form-label">Select RO <span
                            class="text-danger">*</span></label>
                    <div class=" col-sm-12 col-lg-12 has-validation">
                        <ng-select class="pb-2 " placeholder="Select RO" formControlName="rolocationId"
                            [searchable]="true" [clearable]="true"
                            [ngClass]="{'is-invalid':submitted && f['rolocationId'].errors}">
                            <ng-option value="" selected>Select</ng-option>
                            <ng-option [value]="item.branchId" *ngFor="let item of branchList ">{{item.branchName}}</ng-option>
                        </ng-select>

                        <div *ngIf="submitted && f['rolocationId'].errors">
                            <small class="text-danger" *ngIf="f['rolocationId'].errors?.['required']">Please select RO                            </small>

                            <small class="text-danger" *ngIf="f['rolocationId'].errors?.serverError">{{
                                f['rolocationId'].errors.serverError}}</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="form-group ">
                    <label for="inputText" class="col-sm-12 col-lg-12 col-form-label">Select Location <span
                            class="text-danger">*</span></label>
                    <div class=" col-sm-12 col-lg-12 has-validation">
                        <ng-select class="pb-2 " placeholder="Select Location" formControlName="locationId"
                            [searchable]="true" [clearable]="true"
                            [ngClass]="{'is-invalid':submitted && f['locationId'].errors}">
                            <ng-option value="" selected>Select</ng-option>
                            <ng-option [value]="item.cityId" *ngFor="let item of cityList ">{{item.cityName}}</ng-option>
                        </ng-select>

                        <div *ngIf="submitted && f['locationId'].errors">
                            <small class="text-danger" *ngIf="f['locationId'].errors?.['required']">Please select location                            </small>

                            <small class="text-danger" *ngIf="f['locationId'].errors?.serverError">{{
                                f['locationId'].errors.serverError}}</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="form-group ">
                    <label for="inputText" class="col-sm-12 col-lg-12 col-form-label">Select Date <span
                            class="text-danger">*</span></label>
                    <div class=" col-sm-12 col-lg-12 has-validation">
                        <ng-select class="pb-2 " placeholder="Select Date Range" formControlName="rangeDate"
                            [searchable]="true" [clearable]="true" (change)="selectionDate($event)"
                            [ngClass]="{'is-invalid':submitted && f['rangeDate'].errors}">
                            <ng-option value="" selected>Select</ng-option>
                            <ng-option [value]="item.id" *ngFor="let item of selectDateList ">{{item.type}}</ng-option>
                        </ng-select>

                        <div *ngIf="submitted && f['rangeDate'].errors">
                            <small class="text-danger" *ngIf="f['rangeDate'].errors?.['required']">Please select date range
                            </small>

                            <small class="text-danger" *ngIf="f['rangeDate'].errors?.serverError">{{
                                f['rangeDate'].errors.serverError}}</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
<div class="row" >
    <div class="col-lg-6" style="padding-right: 1px;">
        <div class="form-group ">
           <label for="inputText" class="col-sm-12 col-lg-12 col-form-label">From Date</label>
           <div class=" col-sm-12 col-lg-12 has-validation">
              <input type="date" class="form-control" formControlName="fromDate"
                 [ngClass]="{'is-invalid':submitted && f['fromDate'].errors}" 
                 [readOnly]="[2, 3, 4].includes(this.formMaster.controls['rangeDate'].value)">
                  <div *ngIf="submitted && f['fromDate'].errors">
                 <small class="text-danger" *ngIf="f['fromDate'].errors?.['required']">Please select date</small>
                 <small class="text-danger" *ngIf="f['fromDate'].errors?.serverError">{{
                    f['fromDate'].errors.serverError}}</small>
              </div>
           </div>
        </div>
     </div>
     <div class="col-lg-6" style="padding-left: 1px;">
        <div class="form-group ">
           <label for="inputText" class="col-sm-12 col-lg-12 col-form-label">To Date</label>
           <div class=" col-sm-12 col-lg-12 has-validation">
              <input type="date" class="form-control" formControlName="toDate"
                 [ngClass]="{'is-invalid':submitted && f['toDate'].errors}" 
                 [readOnly]="[2, 3, 4].includes(this.formMaster.controls['rangeDate'].value)">
                  <div *ngIf="submitted && f['toDate'].errors">
                 <small class="text-danger" *ngIf="f['toDate'].errors?.['required']">Please select date</small>
                 <small class="text-danger" *ngIf="f['toDate'].errors?.serverError">{{
                    f['toDate'].errors.serverError}}</small>
              </div>
           </div>
        </div>
     </div>

</div>

                </div>



             <div class="col-lg-3">
                <div class="form-group ">
                   <label for="inputText" class="col-sm-12 col-lg-12 col-form-label">Enter FM Document No.<span
                    class="text-danger">*</span></label>
                   <div class=" col-sm-12 col-lg-12 has-validation">
                      <input type="text" class="form-control" formControlName="dfmno"
                         [ngClass]="{'is-invalid':submitted && f['dfmno'].errors}" >
                          <div *ngIf="submitted && f['dfmno'].errors">
                         <small class="text-danger" *ngIf="f['dfmno'].errors?.['required']">Please enter FM Document No.</small>
                         <small class="text-danger" *ngIf="f['dfmno'].errors?.['minlength']">Invalid FM Document No.</small>
                         <small class="text-danger" *ngIf="f['dfmno'].errors?.serverError">{{
                            f['dfmno'].errors.serverError}}</small>
                      </div>
                   </div>
                </div>
             </div>

        </div>
        <div class="row">
            <div class="text-center mt-2 mb-2">
                <button type="button" (click)="onSubmit()" class="btn btn-primary rounded-pill btn-sm btn-padding">Submit</button>
            </div>
        </div>

    </form>
<div class="table-responsive">
    <table class="table table-bordered">
        <thead class="bg-secondary text-white">
            <th>S.No</th>
            <th>(DFM/PFM/FM) No.</th>
            <th>(DFM/PFM/FM) Date</th>
            <th>From â€“ To</th>
            <th>Total Document</th>
            <th>(DFM/PFM/FM)Status</th>
            <th>View/Print</th>
          
        </thead>
        <tbody>
            <tr *ngFor="let item of ViewList; let i= index;">
                <td>{{i+1}}</td>
                <td>{{item.dfmNo}}</td>
                <td>{{item.fmdate |date}}</td>
                <td>{{item.furFWDloc}}</td>
                <td>{{item.totalDocuments}}</td>
                <td>{{item.fmackstatus}}</td>
                <td><span class="title"><a (click)="modelOpen(modelmsg,item)"><i class="bi bi-printer booticon" ngbTooltip="Print" placement="bottom"></i></a></span></td>
              
            </tr>
        </tbody>

    </table>

</div>

      <!-- popup confirm-->
      <ng-template #modelmsg let-modal>
        <div class="modal-header qut-hd" style="padding-top: 4px; padding-bottom: 4px;">
           <h6 class="modal-title" id="exampleModalCenterTitle">View Document  <i
            class="bi bi-printer booticon pl-1" (click)="printPdf()"  style="cursor: pointer;"></i></h6>
        
          <button type="button" class="clos-btn bg-light-blue" (click)="modal.dismiss('Cross click')"
              aria-label="Close">
           <span aria-hidden="true">&times;</span>
           </button> 
         

           <button type="button" rippleefect="" class="btn btn-icon" (click)="modal.dismiss('Cross click')"><i
              aria-hidden="true" class="fa fa-times"></i></button>
        </div>
        <div class="modal-body " tabindex="0" ngbAutofocus>
   <div class="table-responsive" id="view_information">
       <table class="table table-bordered"  >
<thead class="bg-secondary text-white">
   <tr>
      <th colspan="7" class="text-center bg-secondary text-white">View Print</th>
  
   </tr>
</thead>
<tbody>
   <tr>
      <th colspan="1">Document from:</th>
      <td>{{this.printerData.dfmNo}}</td>
      <th colspan="1">Courier Name:</th>
      <td colspan="1">DTDC</td>

        </tr>
        <tr>
         <th colspan="1">Total LR:</th>
         <td>{{this.printerData.totalDocuments}}</td>
         <th colspan="1">Way Bill Date</th>
         <td colspan="1">8 Feb 2024</td>
   
        </tr>
        <tr>
         <th colspan="1">Mode: </th>
         <td>dqe </td>
         <th colspan="1"> Vehicle number:</th>
         <td colspan="1">wqdq</td>
     
                </tr>
                <tr>
                  <th colspan="1">Driver Name:</th>
                  <td>sdsda</td>
                  <th colspan="1">Driver Mobile no</th>
                  <td colspan="1">346534534</td>
               
                </tr>
                <tr>
                  <td colspan="7" style="padding: 0px;margin: 0px;">
                 
                  <table class="table table-bordered" style="margin-bottom: 0px; ">
                 
                     <thead >
                       <tr>
                        <td colspan="7" class="p-0" ><div class="card-title text-center bg-secondary text-white " style="padding-top: 3px; padding-bottom: 3px;">PFM Details</div></td>
                       </tr>
                        <tr class="text-center bg-dark-light ">
                           <th>SR No.</th>
                           <th>POD No:</th>
                           <th>Booking Date:</th>
                           <th>LR Origin-</th>
                           <th>LR Delivery Date:</th>
                           <th>Scan Status:</th>
                           <th>Received:</th>
                        </tr>
                       </thead>
                     <tbody>
                     <tr class="text-center">
                        <td>1</td>
                        <td>0213000213</td>
                        <td>8 feb 2024</td>
                        <td>BTI: BAthiNDA- COHN: COCHIN</td>
                        <td>8 Feb 2024</td>
                        <td>Y</td>
                        <td>Yes</td>
                      </tr>
                     </tbody>
</table>

               </td> 
               </tr>
               
</tbody>
       </table>
      </div>
        
        </div>
     </ng-template>
     <!-- close popup confirm-->




</div>